function getWeather(e){var t=e.city,a="lat="+e.loc.replace(",","&lon="),n=api+a+"&units=metric&"+appid;$.ajax({url:n,dataType:"json"}).done(function(e){var a=e;updateWeather(a,t)})}function updateWeather(e,t){var a=Math.round(e.main.temp),n=new Date(1e3*e.sys.sunrise).toLocaleTimeString(),d=new Date(1e3*e.sys.sunset).toLocaleTimeString(),i=e.weather[0].id;temp.text(a),indicator.text("Â°C"),city.text(t),sunRise.text(n),sunSet.text(d),genarateIcon(i)}function genarateIcon(e){var t;e>199&&e<322&&(t="thunderstom",addIcon(t)),e>499&&e<532&&(t="rainy",addIcon(t)),e>599&&e<623&&(t="flurries",addIcon(t)),e>700&&e<782&&(t="clouds",addIcon(t)),800===e&&(t="clear",addIcon(t)),e>800&&e<805&&(t="clouds",addIcon(t)),e>899&&e<907&&(t="thunderstom",addIcon(t))}function addIcon(e){$("."+e).removeClass("hide")}var api="http://api.openweathermap.org/data/2.5/weather?",appid="appid=e0b01df8d539332186b67b9610fdd7b2",temp=$("#temp"),indicator=$("#indicator"),city=$("#city"),sunRise=$("#sun-rise"),sunSet=$("#sun-set");$(document).ready(function(e){e.ajax({url:"http://ipinfo.io/",dataType:"json"}).done(function(e){var t=e;getWeather(t)})});